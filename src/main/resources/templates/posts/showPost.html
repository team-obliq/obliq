<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <th:block th:replace="fragments/head :: head('Show')"/>
</head>

<body>
<th:block th:replace="fragments/navbar :: navbar"/>

<div class="container fill">
    <div class="row">
        <h1 th:text="${post.title}" class="mx-auto"></h1>
    </div>
    <div class="row">
        <p th:text="${post.body}" class="mx-auto"></p>
    </div>
    <div class="row" th:each="comment : ${comments}">
        <p th:text="${comment.body}"></p>
        <small sec:authorize="isAnonymous()"
               th:text="'posted on: ' + ${#dates.format(comment.dateCreated, 'yyyy-MM-dd')}"></small>
        <p sec:authorize="isAnonymous()" th:text="'posted by: '+ ${comment.user.first_name}"></p>
        <div class="row">
            <a th:href="@{'/edit/' + ${comment.id}}" class="btn btn-primary ml-5">Edit</a>
            <a th:href="@{'/delete/' + ${comment.id}}" class="btn btn-primary ml-5">Delete</a>
        </div>

            <div th:text="${comment.points}" class="col"></div>
            <div class="col"></div>
            <div class="col">
                <!--<form th:action="@{'/add/' + ${id}" th:method="post" th:object="${comment}" >-->
                    <!--<a th:href="@{'/posts/showPost/' + ${comment.post.id}}" class="btn btn-success">Upvote!</a>-->
                    <!--<input type="hidden" th:field="${id}" />-->
                <!--</form>-->
                <a th:href="@{'/add/' + ${comment.id}}" class="btn btn-primary ml-5">Upvote</a>
            </div>

    </div>
    <form th:action="@{/comments/create}" th:method="post" th:object="${comment}">
        <div class="form-group my-5">
            <input th:field="*{body}" class="form-control" placeholder="enter comment"/>
            <input type="hidden" name="postId" th:value="${post.id}"/>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>

</div>

<!--<div class="container fill">-->
<!---->

<!--<br/>-->

<!--<div th:each="comment : ${comments}">-->
<!--<div sec:authorize="isAnonymous()" class="row" th:text="${comment.body}"> </div>-->
<!--</div>-->


<!--<div class ="row">-->
<!--<div class="col-sm">-->
<!--<small th:text="'posted on: ' + ${#dates.format(comment.dateCreated, 'yyyy-MM-dd')}"></small>-->
<!--</div>-->
<!--<div class="col-sm">-->
<!--<p th:text="'posted by: '+ ${comment.user.first_name}"></p>-->
<!--</div>-->
<!--</div>-->
<!--<div class ="row" >-->
<!--<div class="col-sm">-->
<!--<p>	0 </p>-->
<!--</div>-->
<!--<div class="col-sm">-->

<!--</div>-->
<!--<div class="col-sm">-->
<!--<button type="submit">upvote</button>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->


<!--If your not the owner of the post-->


<!--&lt;!&ndash;For each start&ndash;&gt;-->
<!--<div th:each="comment : ${comments}" class="row">-->

<!--&lt;!&ndash;view 1: non comment owner&ndash;&gt;-->
<!--<div sec:authorize="isAnonymous()" class ="row" id="not_comment_owner">-->
<!--<p th:text="${comment.body}"></p>-->
<!--</div>-->
<!--<div class ="row">-->
<!--<div class="col-sm">-->
<!--<small th:text="'posted on: ' + ${#dates.format(comment.dateCreated, 'yyyy-MM-dd')}"></small>-->
<!--</div>-->
<!--<div class="col-sm">-->
<!--<p th:text="'posted by: '+ ${comment.user.first_name}"></p>-->
<!--</div>-->
<!--</div>-->
<!--<div class ="row" >-->
<!--<div class="col-sm">-->
<!--<p>	0 </p>-->
<!--</div>-->
<!--<div class="col-sm">-->

<!--</div>-->
<!--<div class="col-sm">-->
<!--<button type="submit">upvote</button>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->


<!--</div>-->
<!--</div>-->
<!--</div>-->

<script>

</script>
<th:block th:replace="fragments/footer :: footer"/>
<th:block th:replace="fragments/jsLinks :: jsLinks" />

</body>

</html>